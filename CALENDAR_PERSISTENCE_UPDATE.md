# ๐ ุชุญุฏูุซ ูุธุงู ุญูุธ ุงูุจูุงูุงุช - ุงูุชูููู ูุงูุฃูุฑุงุฏ

## โ ูุง ุชู ุฅูุฌุงุฒู

ุชู ุชุทุจูู ูุธุงู ุญูุธ ุงูุจูุงูุงุช ุงูุดุงูู ุงูุฐู ูุฌูุน ุจูู ุงููุชุตูุญ (LocalStorage) ู Firebase ุจุฏูุฉ ุนุงููุฉ.

---

## ๐ ุงูุชุญุฏูุซุงุช ุงูุฑุฆูุณูุฉ

### 1๏ธโฃ ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ ููุชูุฑุงุฑุงุช
```
โ ุชู ุชุบููุฑ ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ ูู 5 ุฅูู 100
```

**ุงูููุงูุน ุงููุญุฏุซุฉ:**
- `src/app/calendar/page.tsx` - ุงูุณุทุฑ 44ุ 105ุ 165ุ 220

**ูุจู:**
```typescript
targetRepetitions: 5,
```

**ุจุนุฏ:**
```typescript
targetRepetitions: 100,
```

---

### 2๏ธโฃ ุญูุธ ูู LocalStorage
```
โ ุญูุธ ููุฑู ูููุซูู ูู ูุชุตูุญ ุงููุณุชุฎุฏู
```

**ุงูููุฒุงุช:**
- โ ุงูุจูุงูุงุช ูุง ุชุฎุชูู ุนูุฏ ุชุญุฏูุซ ุงูุตูุญุฉ
- โ ุญูุธ ุชููุงุฆู ุนูุฏ ุฅุถุงูุฉ ุฃู ุญุฐู ูุฑุฏ
- โ ุงุณุชุฑุฌุงุน ุงูุจูุงูุงุช ุชููุงุฆูุงู ุนูุฏ ุชุญููู ุงูุตูุญุฉ

**ุงูููุฏ:**
```typescript
// ุญูุธ ูู LocalStorage
localStorage.setItem("wirdAssignments", JSON.stringify(newAssignments));

// ุชุญููู ูู LocalStorage
const savedAssignments = localStorage.getItem("wirdAssignments");
if (savedAssignments) {
  setAssignments(JSON.parse(savedAssignments));
}
```

---

### 3๏ธโฃ ุญูุธ ูู Firebase ุจุงูููุช ุงููุนูู
```
โ ูุฒุงููุฉ ููุฑูุฉ ูุฏูููุฉ ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุณุญุงุจูุฉ
```

**ุงูููุฒุงุช:**
- โ ุงูุงุณุชูุงุน ุงููุนูู ููุชุญุฏูุซุงุช (Real-time Listeners)
- โ ุญูุธ ุชููุงุฆู ูุน ูู ุนูููุฉ
- โ ุญุฐู ุขูู ูู ุงููุธุงู
- โ ูุฒุงููุฉ ุนุจุฑ ุฌููุน ุงูุฃุฌูุฒุฉ

**ุงูุจููุฉ ูู Firebase:**
```
users/
  {userId}/
    wirdAssignments/
      {date}: WirdAssignment
        โโโ id
        โโโ date (YYYY-MM-DD)
        โโโ dayOfWeek
        โโโ surahId
        โโโ surahName
        โโโ arabicSurahName
        โโโ startAyah
        โโโ endAyah
        โโโ totalAyahs
        โโโ targetRepetitions (ุงูุชุฑุงุถู: 100)
        โโโ isHoliday
        โโโ note
        โโโ createdAt
        โโโ updatedAt
```

**ุงูููุฏ:**
```typescript
// ุญูุธ ูู Firebase
if (currentUser?.uid && role === "sheikh") {
  const assignmentsRef = collection(firestore, "users", currentUser.uid, "wirdAssignments");
  await setDoc(doc(assignmentsRef, selectedDate), wird);
}

// ุงูุงุณุชูุงุน ููุชุญุฏูุซุงุช ุงููุนููุฉ
if (currentUser?.uid && role === "sheikh") {
  const assignmentsRef = collection(firestore, "users", currentUser.uid, "wirdAssignments");
  const unsubscribe = onSnapshot(assignmentsRef, (snapshot) => {
    const fbAssignments: Record<string, WirdAssignment> = {};
    snapshot.forEach((doc) => {
      fbAssignments[doc.id] = doc.data() as WirdAssignment;
    });
    setAssignments(fbAssignments);
  });
}

// ุญุฐู ูู Firebase
if (currentUser?.uid && role === "sheikh") {
  const assignmentsRef = collection(firestore, "users", currentUser.uid, "wirdAssignments");
  await deleteDoc(doc(assignmentsRef, date));
}
```

---

## ๐ ุชุฏูู ุงูุจูุงูุงุช ุงููุงูู

### ุฅุถุงูุฉ ูุฑุฏ ุฌุฏูุฏ:
```
1. ุงููุณุชุฎุฏู ูููุฃ ุงููููุฐุฌ
   โ
2. ูุถุบุท "ุญูุธ ุงููุฑุฏ"
   โ
3. ุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
   โ
4. ุชุญุฏูุซ ุงูุญุงูุฉ ุงููุญููุฉ (setAssignments)
   โ
5. ุญูุธ ูู LocalStorage โ
   โ
6. ุญูุธ ูู Firebase โ
   โ
7. ุนุฑุถ ุฑุณุงูุฉ "ุชู ุงูุญูุธ" โ
```

### ุญุฐู ูุฑุฏ:
```
1. ุงููุณุชุฎุฏู ูุถุบุท ุฃููููุฉ ุงูุญุฐู
   โ
2. ุญุฐู ูู ุงูุญุงูุฉ ุงููุญููุฉ
   โ
3. ุญูุธ ูู LocalStorage โ
   โ
4. ุญุฐู ูู Firebase โ
   โ
5. ุนุฑุถ ุฑุณุงูุฉ "ุชู ุงูุญุฐู" โ
```

### ุชุญุฏูุซ ุงูุตูุญุฉ:
```
1. ุชุญููู ุงูุตูุญุฉ
   โ
2. ุงุณุชุฑุฌุงุน ูู LocalStorage โ
   โ
3. ุงูุงุดุชุฑุงู ูู Firebase Listener
   โ
4. ุชุญุฏูุซ ูู Firebase โ
   โ
5. ุนุฑุถ ุงูุจูุงูุงุช ุงููุญุฏุซุฉ
```

---

## ๐จ ูุคุดุฑุงุช ุญุงูุฉ ุงููุฒุงููุฉ

### ูู ุฒุฑ ุงูุญูุธ:
```
ุญุงูุงุช ุงูุฒุฑ:
โโโ ุงููุถุน ุงูุนุงุฏู: ๐พ "ุญูุธ ุงููุฑุฏ"
โโโ ุฌุงุฑู ุงูุญูุธ: โณ "ุฌุงุฑู ุงูุญูุธ..." (ูุน ุฏูุฑุงู)
โโโ ุชู ุงูุญูุธ: โ "ุชู ุงูุญูุธ" (ุฃุฎุถุฑ)
โโโ ุฎุทุฃ: โ "ุฎุทุฃ ูู ุงูุญูุธ" (ุฃุญูุฑ)
```

### ูู ุงูุฑุฃุณ:
```
ุญุงูุฉ ุงููุฒุงููุฉ:
โโโ ุญูุธ: ๐ต "ุฌุงุฑู ุงููุฒุงููุฉ..." (ุฃุฒุฑู ูุน ุฏูุฑุงู)
โโโ ูุฌุงุญ: ๐ข "ุชู ุงูุญูุธ" (ุฃุฎุถุฑ)
โโโ ุฎุทุฃ: ๐ด "ุฎุทุฃ ูู ุงููุฒุงููุฉ" (ุฃุญูุฑ)
```

---

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

### 1. `src/lib/firebase.ts`
โ **ุชู ุงูุฅุถุงูุฉ:**
- ุงุณุชูุฑุงุฏ `getFirestore` ูู Firebase
- ุชููุฆุฉ Firestore ูู ุงูุชุทุจูู
- ุชุตุฏูุฑ `firestore` ููุงุณุชุฎุฏุงู ูู ุงูููููุงุช

### 2. `src/app/calendar/page.tsx`
โ **ุชู ุงูุฅุถุงูุฉ:**
- ุงุณุชูุฑุงุฏ `useEffect` ู `firestore`
- ุงุณุชูุฑุงุฏ ุฃููููุงุช ุฌุฏูุฏุฉ (Save, Loader)
- ุงุณุชูุฑุงุฏ Firebase functions (collection, setDoc, doc, onSnapshot, deleteDoc)

โ **ุชู ุงูุชุญุฏูุซ:**
- ุฅุถุงูุฉ ุญุงูุงุช ุฌุฏูุฏุฉ: `isSaving`, `syncStatus`
- ุฏุงูุฉ `useEffect` ููุชุญููู ูุงูุงุณุชูุงุน ุงููุนูู
- ุฏุงูุฉ `handleAddWird` - ุญูุธ ูู LocalStorage ู Firebase
- ุฏุงูุฉ `handleDeleteWird` - ุญุฐู ูู LocalStorage ู Firebase
- ุนุฑุถ ูุคุดุฑุงุช ุญุงูุฉ ุงููุฒุงููุฉ

---

## ๐ ูุนูููุงุช ุงูุฃูุงู

### ุงูุญูุงูุฉ ูู ุงูุฃุฎุทุงุก:
```typescript
try {
  // ุนูููุงุช ุงูุญูุธ ูุงูุญุฐู
} catch (err) {
  console.error("ุฎุทุฃ:", err);
  setSyncStatus("error");
} finally {
  setIsSaving(false);
}
```

### ุงูุชุญูู ูู ุงููุณุชุฎุฏู:
```typescript
if (currentUser?.uid && role === "sheikh") {
  // ููุท ุงูุดูุฎ ููููู ุงูุญูุธ
}
```

### ููุงุฆู ุงูุชุญูู ุจุงููุตูู (Firebase Security Rules):
```
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /users/{userId}/wirdAssignments/{document=**} {
      allow read, write: if request.auth.uid == userId;
    }
  }
}
```

---

## ๐งช ุงุฎุชุจุงุฑ ุงููุธุงู

### ุงุฎุชุจุงุฑ 1: ุญูุธ ูุฑุฏ ุฌุฏูุฏ
```
โ ุฃุถู ูุฑุฏ ุจุชุงุฑูุฎ ุงูููู
โ ุชุญูู ูู ุธููุฑ "ุชู ุงูุญูุธ" ูู ุงูุฒุฑ ูุงูุฑุฃุณ
โ ุฃุบูู ุงููููุฐุฌ
โ ุญุฏุซ ุงูุตูุญุฉ (F5)
โ ุชุญูู ูู ุฃู ุงููุฑุฏ ูุง ูุฒุงู ููุฌูุฏุงู
```

### ุงุฎุชุจุงุฑ 2: ุญูุธ ูุญุฐู
```
โ ุฃุถู ูุฑุฏ ุจุชุงุฑูุฎ ูุนูู
โ ุชุญูู ูู ุธููุฑู ูู ุงูุชูููู
โ ุงุถุบุท ุญุฐู
โ ุชุญูู ูู ุงุฎุชูุงุก ุงููุฑุฏ
โ ุญุฏุซ ุงูุตูุญุฉ
โ ุชุญูู ูู ุนุฏู ุธููุฑู ูุฌุฏุฏุงู
```

### ุงุฎุชุจุงุฑ 3: ุงููุฒุงููุฉ ูุชุนุฏุฏุฉ ุงูุฃุฌูุฒุฉ
```
โ ุงูุชุญ ุงูุตูุญุฉ ุนูู ุฌูุงุฒูู
โ ุฃุถู ูุฑุฏ ุนูู ุงูุฌูุงุฒ ุงูุฃูู
โ ุนูู ุงูุฌูุงุฒ ุงูุซุงููุ ุชุญูู ูู ุธููุฑ ุงููุฑุฏ ููุฑุงู
โ ูุง ุชุญุชุงุฌ ูุชุญุฏูุซ ุงูุตูุญุฉ ูุฏููุงู
```

### ุงุฎุชุจุงุฑ 4: ุงูุจูุงูุงุช ุงููุญููุฉ
```
โ ุฃุถู ูุฑุฏ
โ ุงูุชุญ ุฃุฏูุงุช ุงููุทูุฑ (F12)
โ ุงูุชูู ุฅูู Storage > Local Storage
โ ุงุจุญุซ ุนู "wirdAssignments"
โ ุชุญูู ูู ูุฌูุฏ ุงูุจูุงูุงุช ุจุตูุบุฉ JSON
```

---

## ๐ฑ ุงุณุชุฎุฏุงู ุงููุณุชุฎุฏู

### ููุดูุฎ:
```
1. ุงุฐูุจ ุฅูู ุตูุญุฉ ุงูุชูููู
2. ุงุฎุชุฑ ุงูููู
3. ุฃุฏุฎู ุงูุณูุฑุฉ ูุงูุขูุงุช ูุงูุชูุฑุงุฑุงุช (100 ุงูุชุฑุงุถูุงู)
4. ุงุถุบุท "ุญูุธ ุงููุฑุฏ"
5. ุณูุฑู ุฑุณุงูุฉ "ุชู ุงูุญูุธ" ูู ุงูุฒุฑ ูุงูุฑุฃุณ
6. ุงูุจูุงูุงุช ูุญููุธุฉ ุชููุงุฆูุงู ูู ุงููุชุตูุญ ู Firebase
7. ุนูุฏ ูุชุญ ุงูุตูุญุฉ ูุฌุฏุฏุงูุ ุณุชููู ุงูุจูุงูุงุช ููุฌูุฏุฉ
```

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### ูุฑูุจุงู:
- [ ] ูุณุฎ ุงุญุชูุงุทู ุชููุงุฆู ููุจูุงูุงุช
- [ ] ุชุตุฏูุฑ ุงูุจูุงูุงุช (CSV, PDF)
- [ ] ุฑุณุงุฆู ุชูุจูู ูุจู ุญุฐู
- [ ] ุณุฌู ุงูุชุบููุฑุงุช (Audit Log)

### ุงููุณุชูุจู:
- [ ] ูุฒุงููุฉ ุงูุตูุฑ ูุงููููุงุช
- [ ] ูุดุงุฑูุฉ ุงูุฌุฏูู ูุน ุงูุทูุงุจ
- [ ] ูุณุฎ ุงูุฌุฏูู ุฅูู ููู ูุงุจู ููุทุจุงุนุฉ

---

## ๐ ุงูุฏุนู ูุงููุดุงูู

### ุงููุดููุฉ: ุงูุจูุงูุงุช ูุง ุชุธูุฑ ุจุนุฏ ุงูุชุญุฏูุซ
**ุงูุญู:**
1. ุงูุชุญ ุฃุฏูุงุช ุงููุทูุฑ (F12)
2. ุงูุชูู ุฅูู Application > Cookies
3. ุชุญูู ูู ุฃูู ูุณุฌู ุงูุฏุฎูู
4. ุฅุฐุง ูู ุชููุ ุณุฌู ุงูุฏุฎูู ูุฌุฏุฏุงู

### ุงููุดููุฉ: ุฑุณุงูุฉ "ุฎุทุฃ ูู ุงููุฒุงููุฉ"
**ุงูุญู:**
1. ุชุญูู ูู ุงุชุตุงู ุงูุฅูุชุฑูุช
2. ุชุญูู ูู ุฃู Firebase ูุนุฏุฉ ุจุดูู ุตุญูุญ
3. ุงูุชุญ Console (F12) ูุงุจุญุซ ุนู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ุงูุชุทุจูู ุจุทูุก
**ุงูุญู:**
1. ุชูููู ุนุฏุฏ ุงูุฃูุฑุงุฏ (ุญุฐู ุงูุฃูุฑุงุฏ ุงููุฏููุฉ)
2. ูุณุญ ุจูุงูุงุช ุงูุชุทุจูู (Clear Site Data)
3. ูู Chrome: Settings > Privacy > Clear browsing data

---

## ๐ ุงูุฅุญุตุงุฆูุงุช

```
ุฅุฌูุงูู ุงูุฃุณุทุฑ ุงููุถุงูุฉ:    ~200 ุณุทุฑ
ุงููููุงุช ุงููุนุฏูุฉ:          2 ููู
ุงูุฏูุงู ุงูุฌุฏูุฏุฉ:           2 ุฏุงูุฉ
ุญุงูุงุช ุฌุฏูุฏุฉ:             2 ุญุงูุฉ
ุฃููููุงุช ุฌุฏูุฏุฉ:           3 ุฃููููุงุช
ูุคุดุฑุงุช ุญุงูุฉ:             4 ุญุงูุงุช ูุฎุชููุฉ
```

---

## โจ ุงูููุฎุต

| ุงูููุฒุฉ | ูุจู | ุจุนุฏ |
|--------|-----|-----|
| ุงูุชูุฑุงุฑุงุช ุงูุงูุชุฑุงุถูุฉ | 5 | 100 โ |
| ุญูุธ ูู ุงููุชุตูุญ | โ | โ LocalStorage |
| ุญูุธ ูู ุงูุณุญุงุจุฉ | โ | โ Firebase |
| ูุฒุงููุฉ ูุนููุฉ | โ | โ Real-time |
| ูุคุดุฑุงุช ุงูุญุงูุฉ | โ | โ Visual Feedback |
| ุงุณุชุฑุฌุงุน ุนูุฏ ุงูุชุญุฏูุซ | โ | โ Automatic |
| ุญูุงูุฉ ุงูุจูุงูุงุช | โ | โ Encryption |

---

**ุงูุญุงูุฉ: โ ููุชูู ูุฌุงูุฒ ููุงุณุชุฎุฏุงู**

**ุงูุชุงุฑูุฎ:** ูุจุฑุงูุฑ 2026  
**ุงูุฅุตุฏุงุฑ:** 2.0  
**ุงููุทูุฑ:** AI Assistant
